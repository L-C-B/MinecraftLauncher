<!DOCTYPE html>
<html lang="fr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../css/app.css" />  
    <link rel="stylesheet" href="../css/toast.css" />   
    <script src="../scripts/toast.js"></script>
  </head>
  <body>
    <form>
      <div class= "box"></div>
      <div class="button-box">
        <button id="site" class="button">SITE WEB</button>
        <button id="discord" class="button">DISCORD</button>
        <button id="github" class="button">GITHUB</button>
        <img src="https://minotar.net/avatar/MHF_Steve/100.png" id="skin" /><br />
        <img src="../images/background.png" id="background" /><br />
        <img src="../images/logo.png" id="logo" /><br />
        <button id="play" class="button">LANCER LE JEU</button>
        <button id="deco" class="button">DÃ‰CONNEXION</button>
    </div>
    <script>
    const ipc = require("electron").ipcRenderer;
    const custombar = require("custom-electron-titlebar");
    const iziToast = require("izitoast");
    const ipcMain= require("electron");
    const shell = require("electron").shell;
    let site = document.getElementById("site");
    let skin = document.getElementById("skin");
    let deco = document.getElementById("deco");
    let playbtn = document.getElementById("play");
    let progress = document.querySelector(".progress-done");
    let discord = document.getElementById("discord")
    let github = document.getElementById("github")
    let bar = new custombar.Titlebar({
    menu: null,
    backgroundColor: custombar.Color.fromHex("#161616"),
    maximizable : false,
    });

    deco.addEventListener("click", () => {
      localStorage.clear()
      deco.disabled = true;
      ipc.send("logout", JSON.parse(localStorage.getItem("user")));
    });
    site.addEventListener("click", () => {
      site.disabled = false;
      event.preventDefault();
      shell.openExternal("http://spectreclient.fr/");
    });
    github.addEventListener("click", () => {
      site.disabled = false;
      event.preventDefault();
      shell.openExternal("https://github.com/L-C-B");
    });
    discord.addEventListener("click", () => {
      discord.disabled = false;
      event.preventDefault();
      shell.openExternal("https://discord.gg/qHwGDUN");
    });
    playbtn.addEventListener('click', () => {
      event.preventDefault();
      playbtn.disabled = true;
      ipc.send("play", JSON.parse(localStorage.getItem("user"))); 
    });
    ipc.on("profile",(evt, user) => {
      localStorage.setItem("profile", JSON.stringify(user));
      skin.src = `https://minotar.net/avatar/${user.name}/100.png`;
    });
    ipc.on("user",(evt, user) => {
      localStorage.setItem("user", JSON.stringify(user));
      skin.src = `https://minotar.net/avatar/${user.name}/100.png`;
    });
    </script>
  </body>
</html>